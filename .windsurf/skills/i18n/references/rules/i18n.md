# Internationalization (i18n)

Guidelines for internationalization and translation management.

## Translation Management - CRITICAL RESTRICTIONS

**ABSOLUTELY FORBIDDEN** (These files are AUTO-GENERATED):
- ❌ **NEVER** modify auto-generated translation enum files - Will be overwritten and break i18n system
- ❌ **NEVER** modify locale JSON files managed by translation system
- ❌ **NEVER** hardcode text strings in components - ALWAYS use translation keys
- ❌ **NEVER** add translation keys directly to enum files - Use proper workflow

**CONSEQUENCES OF VIOLATION**:
- Translation system corruption
- Loss of translation work
- Build failures in i18n pipeline
- Breaking localization for international users

## Using Translations

- Use `useFormatMessage` or `formatMessage` functions for displaying translated text
- Define new translation keys in the appropriate modules
- Always use translation keys instead of hardcoding text strings
- Follow the established pattern for translation keys: `namespace__action_or_description`

## Updating Translation Keys

1. **Direct translation from design specs**: Update i18n directly based on design spec annotations without searching existing translation keys
2. Run the locale sync command (e.g., `yarn fetch:locale`) to pull the latest translation keys from the remote system
3. This command automatically updates the translation enum file with new translation enums
4. For design spec translation keys like `feature::action_name`, convert to code format:
   - Replace `::` with `_` (underscore)
   - Use the enum: `ETranslations.feature_action_name`
   - In component code:
     ```tsx
     {intl.formatMessage({
       id: ETranslations.feature_action_name,
     })}
     ```

## Locale Handling

- The system uses automatic locale detection with fallbacks
- Default locale fallback chain is implemented in `getDefaultLocale.ts`
- Respect platform-specific locale handling (web, native, desktop, extension)

## Code Examples

### Using Translations in Components

```tsx
import { useIntl } from 'react-intl';
import { ETranslations } from '@{scope}/shared/src/locale';

function MyComponent() {
  const intl = useIntl();

  return (
    <Text>
      {intl.formatMessage({
        id: ETranslations.global__confirm,
      })}
    </Text>
  );
}
```

### Using formatMessage Outside Components

```typescript
import { appLocale } from '@{scope}/shared/src/locale/appLocale';
import { ETranslations } from '@{scope}/shared/src/locale';

const message = appLocale.intl.formatMessage({
  id: ETranslations.global__cancel,
});
```

### Translation Key Naming Pattern

```
namespace__action_description

Examples:
- global__confirm
- global__cancel
- swap__select_token
- wallet__create_wallet
- settings__dark_mode
```

## Key Files (Example Structure)

| Purpose | File Path |
|---------|-----------|
| Translation enum | `packages/shared/src/locale/enum/translations.ts` |
| Locale JSON files | `packages/shared/src/locale/json/` |
| App locale | `packages/shared/src/locale/appLocale.ts` |
| Default locale | `packages/shared/src/locale/getDefaultLocale.ts` |

## Workflow Summary

1. Design provides translation key like `feature::action_name`
2. Run locale sync command to sync translations
3. Convert key format: `feature::action_name` → `ETranslations.feature_action_name`
4. Use in code with `intl.formatMessage({ id: ETranslations.feature_action_name })`
